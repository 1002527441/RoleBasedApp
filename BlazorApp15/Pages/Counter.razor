@page "/counter"
@using Microsoft.AspNetCore.Http
@inject IHttpContextAccessor http

@using Microsoft.AspNetCore.ProtectedBrowserStorage
@inject ProtectedSessionStorage sessionStore
@inject ProtectedLocalStorage localStorage


    <div @onkeypress="@(e=>EnterKeyPress(e))">

        <h1>Counter</h1>
        <p>Current count: @currentCount</p>

        <label>@http.HttpContext.Request</label>

        <button class="btn btn-primary" @onclick="IncrementCount">Click me</button>

        <button class="btn btn-primary" @onclick="SetSession">SetSession</button>
        <button class="btn btn-primary" @onclick="GetSession">GetSession</button>

        <button class="btn btn-danger" @onkeypress="@(e=>EnterKeyPress(e))" @onkeypress:preventDefault="false">Key Press</button>

    </div>


@code {


    private int currentCount = 0;

    private void IncrementCount()
    {

        currentCount++;
    }

    private async Task GetSession()
    {
        string sValue1 = http.HttpContext.Session.GetString("name");
        string sValue2 = await sessionStore.GetAsync<string>("name");
        string sValue3 = await localStorage.GetAsync<string>("localName");
    }

    private async Task SetSession()
    {
        await sessionStore.SetAsync("name", "herny.Sesion");
        await localStorage.SetAsync("localName", "local.Henry");
        //http.HttpContext.Session.SetString("userName", "henry");
    }


    private void EnterKeyPress(KeyboardEventArgs e)
    {
        
        currentCount++;
    }





}
